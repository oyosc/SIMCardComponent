var helper = require('./spec_helper');
var chai   = require('chai');
var expect = chai.expect;

describe("testing mocha --watch", function() {
  var subject;

  beforeEach(function() {
    subject = {
      sampleCalled: function() {
        return 1;
      },
      samplePublic: function() {
        this.sampleCalled();
      }
    };
  });

  beforeEach(function() {
    this.sinon.spy(subject, 'sampleCalled');
  });

  context("when mocha --watch is used", function() {
    it("does not throw up", function() {
      subject.samplePublic();

      expect(subject.sampleCalled).to.have.been.called;
    });
  });
});
